services:
  crypto-lib:
    build:
      context: .
      dockerfile: Dockerfile
    image: shamir-secret-sharing:latest
    container_name: sss-crypto-lib
    volumes:
      - .:/app
    working_dir: /app
    command: >
      bash -c "
      echo '========================================';
      echo '  Building Project in Docker';
      echo '========================================';
      cd /app &&
      rm -rf build &&
      mkdir -p build &&
      cd build &&
      cmake .. &&
      make &&
      echo '' &&
      echo '========================================';
      echo '  Running Tests';
      echo '========================================';
      echo '' &&
      ./simple_test &&
      echo '' &&
      ./comprehensive_test &&
      echo '' &&
      ./secure_memory_test &&
      echo '' &&
      ./mpc_foundation_test &&
      echo '' &&
      ./mpc_arithmetic_test &&
      echo '' &&
      echo '========================================';
      echo '  âœ“ All Tests Completed!';
      echo '========================================';
      "
